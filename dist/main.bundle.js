(()=>{const e="https://notes-api.dicoding.dev/v2";var t=[];const n=document.getElementById("notes"),o=document.querySelector(".loader");function a(a){const s=document.createElement("div");s.className="note",s.id=a.id;const i=`\n      <p class="note-content">${a.title}</p>\n      <p class="note-body">${a.body}</p>\n      <div class="note-actions" style="display: block;">\n          <button class="archive-button">Archive</button>\n          <button class="delete-button">Delete</button>\n      </div>\n      <small>${new Date(a.createdAt).toLocaleString()}</small>\n  `;s.innerHTML=i,n.appendChild(s),s.querySelector(".archive-button").addEventListener("click",(function(){!async function(n){if(confirm("Apakah Anda yakin ingin mengarsip catatan ini?")){o.style.display="block";try{var a=e+"/notes/"+n+"/archive";if(!(await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to post data")}catch(e){console.error("Error:",e.message)}finally{o.style.display="none"}const s=t.findIndex((e=>e.id===n));t.splice(s,1),document.getElementById(n).remove()}}(a.id)})),s.querySelector(".delete-button").addEventListener("click",(function(){!async function(n){if(confirm("Apakah Anda yakin ingin menghapus catatan ini?")){o.style.display="block";try{var a=e+"/notes/"+n;if(!(await fetch(a,{method:"DELETE"})).ok)throw new Error("Failed to post data")}catch(e){console.error("Error:",e.message)}finally{o.style.display="none"}const s=t.findIndex((e=>e.id===n));t.splice(s,1),document.getElementById(n).remove()}}(a.id)}))}document.getElementById("newNote").addEventListener("click",(function(){var e=document.querySelector(".new-note-form");"none"===e.style.display||""===e.style.display?e.style.display="flex":e.style.display="none"})),document.getElementById("newNoteForm").addEventListener("submit",(async function(n){n.preventDefault();var s=this.noteTitle.value,i=this.noteBody.value;if(!this.dataset.mode&&""!==s.trim()&&""!==i.trim()){o.style.display="block";try{var l=e+"/notes";const n={title:s,body:i},o=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok)throw new Error("Failed to post data");const d=await o.json();a(d.data),t.push(d.data),console.log("Response data:",d)}catch(e){console.error("Error posting data:",e.message)}finally{o.style.display="none",this.reset(),this.style.display="none"}}})),document.getElementById("toggleModeButton").addEventListener("click",(function(){document.body.classList.toggle("dark-mode")})),document.getElementById("searchForm").addEventListener("submit",(function(e){e.preventDefault(),n.innerHTML="";const s=document.getElementById("searchInput").value.trim().toLowerCase(),i=t.filter((e=>e.title.toLowerCase().includes(s)||e.body.toLowerCase().includes(s)));o.style.display="block",setTimeout((()=>{i.forEach((e=>{a(e)})),o.style.display="none"}),1e3)})),async function(){o.style.display="block";try{var n=e+"/notes";const o=await fetch(n);if(!o.ok)throw new Error("Failed to fetch data");(await o.json()).data.forEach((e=>{t.push(e),a(e)}))}catch(e){console.error("Error fetching data:",e.message)}finally{o.style.display="none"}}()})();